# Production Environment Configuration Template
# Copy this file to .env.prod and fill in actual values
# NEVER commit .env.prod to version control

# Application Settings
APP_ENV=production
APP_VERSION=1.0.0
LOG_LEVEL=INFO
DEBUG=false
STRICT_STARTUP=true

# Database Configuration (Digital Ocean Managed Postgres)
# Format: postgresql://username:password@hostname:port/database?sslmode=require
# Get connection string from Digital Ocean Control Panel > Databases > Connection Details
DATABASE_URL=postgresql://doadmin:CHANGE_ME@db-postgresql-nyc1-12345-do-user-12345-0.b.db.ondigitalocean.com:25060/recoveryos?sslmode=require

# Database Pool Settings (adjust based on your Digital Ocean plan)
# Starter plan: 25 connections, Basic: 60, Professional: 120
# Keep pool_size + max_overflow < max_connections * 0.7 for safety
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Database Auto-Migration (one-shot migration job handles this)
# Keep FALSE in API containers, only enable in migration job
DB_AUTO_MIGRATE=false

# Privacy & Security
REQUEST_LOG_REDACT=true
DEIDENTIFY_DEFAULT=true

# Rate Limiting (per client)
RATE_LIMIT_CAPACITY=5
RATE_LIMIT_WINDOW_SECONDS=10

# OpenTelemetry Configuration (Grafana Cloud)
# Get endpoint and API key from Grafana Cloud > Connections > OpenTelemetry
# Start with ENABLE_OTEL_TRACING=false until backend ready, then enable per-env
ENABLE_OTEL_TRACING=false
OTEL_EXPORTER_OTLP_ENDPOINT=https://otlp-gateway-prod-us-central-0.grafana.net/otlp
OTEL_EXPORTER_OTLP_HEADERS=Authorization=Basic CHANGE_ME_BASE64_ENCODED_CREDENTIALS
OTEL_SERVICE_NAME=recoveryos-api
TRACES_SAMPLE_RATE=0.05
METRICS_ENABLED=true

# Error Tracking (Optional - Sentry)
# SENTRY_DSN=https://your-key@sentry.io/your-project-id
# LOG_STACKS_TO_SENTRY=true

# JWT Authentication (if using)
# JWT_PUBLIC_KEYS_URL=https://your-auth-provider.com/.well-known/jwks.json
# JWT_ALGORITHM=RS256
# JWT_KEYS_CACHE_TTL=3600

# SMS Provider (Twilio) - Optional
# SMS_PROVIDER=twilio
# TWILIO_ACCOUNT_SID=ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
# TWILIO_AUTH_TOKEN=your_auth_token_here
# TWILIO_MESSAGING_SERVICE_SID=MGXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
# ENABLE_SMS_NOTIFICATIONS=false

# Risk Scoring Configuration
RISK_MODEL_VERSION=v0.1.0
RISK_GRACE_DAYS=3
RISK_BANDS=0-29,30-54,55-74,75-100

# Feature Flags
ENABLE_FAMILY_SHARING=false
ENABLE_CRISIS_ALERTS=true
ENABLE_SMS_NOTIFICATIONS=false

# Session Management (if using)
# SESSION_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_hex_32
